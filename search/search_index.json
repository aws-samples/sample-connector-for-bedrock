{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Bedrock Connector Doc","text":""},{"location":"deploy/","title":"Quick Deploy BRConnector using Cloudformation","text":""},{"location":"deploy/#supported-region","title":"Supported Region","text":"<p>Cloudformation template are verified in following regions:</p> <ul> <li>us-east-1</li> <li>us-west-2</li> </ul>"},{"location":"deploy/#prerequisites","title":"Prerequisites","text":"<p>Enable Claude 3 Sonnet or Haiku in your region - If you are new to using Anthropic models, go to the\u00a0Amazon Bedrock console\u00a0and choose\u00a0Model access\u00a0on the bottom left pane. Request access separately for Claude 3 Sonnet or Haiku.</p>"},{"location":"deploy/#components","title":"Components","text":"<p>Following key components will be included in this Cloudformation template: </p> <ul> <li>Cloudfront</li> <li>BRConnector on Lambda or EC2</li> <li>RDS PostgreSQL or PostgreSQL container on EC2</li> <li>ECR with pull through cache enabled</li> </ul>"},{"location":"deploy/#deploy-guide","title":"Deploy Guide","text":"<ul> <li>Download quick-build-brconnector.yaml and upload to Cloudformation console or click this button to launch directly.</li> </ul> <ul> <li>VPC parameters<ul> <li>Choose to create a new VPC or a existing VPC </li> <li>Choose one PUBLIC subnet for EC2 and two PRIVATE subnets for Lambda and RDS (subnet group need 2 AZ at least)</li> </ul> </li> </ul> <ul> <li>Compute parameters<ul> <li>Choose ComputeType for BRConnector, Lambda or EC2</li> <li>For EC2 settings<ul> <li>Now only support Amazon Linux 2023</li> <li>You could choose to create PostgreSQL as container in same EC2 (<code>StandaloneDB</code> to false), or create standalone RDS PostgreSQL as backend (<code>StandaloneDB</code> to true)</li> </ul> </li> <li>For Lambda settings<ul> <li>PUBLIC Function URL will be used. Please ensure this security setting is acceptable</li> <li>Define your private repository name prefix string</li> <li>Always create RDS PostgreSQL (<code>StandaloneDB</code> to true)</li> </ul> </li> </ul> </li> </ul> <ul> <li>PostgreSQL parameters<ul> <li>Default PostgreSQL password is <code>mysecretpassword</code></li> <li>If you choose <code>StandaloneDB</code> to false, PostgreSQL will running on EC2 as container. RDS PostgreSQL will be create if this option is true.</li> <li>Keep others as default</li> </ul> </li> </ul> <ul> <li>Debugging parameters<ul> <li>If you choose Lambda as ComputeType, you could choose to delete EC2 after all resources deploy successfully. This EC2 is used for compiling and building BRConnector container temporarily. </li> <li>Don\u2019t delete EC2 if you choose EC2 as ComputeType</li> <li>If you set <code>true</code> to AutoUpdateBRConnector, one script will be add to ec2 crontab</li> </ul> </li> </ul> <ul> <li>Until deploy successfully, go to output page and copy Cloudfront URL and first user key to your bedrock client settings page.</li> </ul> <ul> <li>Also you could connect to <code>BRConnector</code> EC2 instance with SSM Session Manager (docs)</li> </ul>"},{"location":"deploy/#update-brconnector","title":"Update BRConnector","text":""},{"location":"deploy/#autoupdate-is-true","title":"AutoUpdate is true","text":"<ul> <li>Check your ECR settings, if has rules in pull through cache page, you have enabled this feature to update ECR image with upstream repo automatically.</li> <li>Go to codebuild page, one project will be triggered to build regularly to update your lambda image automatically</li> <li>Images in EC2 will be updated using state manager in SSM automatically.</li> </ul>"},{"location":"deploy/#autoupdate-is-false","title":"AutoUpdate is false","text":"<ul> <li>Check your ECR settings, if has rules in pull through cache page, you have enabled this feature to update ECR image with upstream repo automatically.</li> <li>Go to codebuild page, one project could be triggered to update your lambda image manually. Click <code>Start build</code> to update lambda image.</li> <li>Images in EC2 will NOT be updated using state manager in SSM automatically due to no association created. Reference document in SSM to execute commands in EC2 manually.</li> </ul>"},{"location":"deploy/#ecr-without-pull-through-cache-enabled-only-for-previous-cfn-version","title":"ECR without pull through cache enabled (only for previous cfn version)","text":"<ul> <li> <p>following this script to update image manually if you do not enable ECR pull through cache <pre><code>export AWS_DEFAULT_REGION=us-west-2\nexport ACCOUNT_ID=123456789012\nexport PrivateECRRepository=your_private_repo_name\n\naws ecr get-login-password --region ${AWS_DEFAULT_REGION} | docker login --username AWS --password-stdin ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com\n\n# pull/tag/push arm64 image for lambda\ndocker pull --platform=linux/arm64 public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda\ndocker tag public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64\ndocker push ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64\n\n# pull/tag/push amd64 image for lambda\ndocker pull --platform=linux/amd64 public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda\ndocker tag public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64\ndocker push ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64\n\n# create/push manifest file\ndocker manifest create ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest --amend ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64 --amend ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64\ndocker manifest annotate ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64 --os linux --arch arm64\ndocker manifest annotate ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64 --os linux --arch amd64\ndocker manifest push ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest\n</code></pre></p> </li> <li> <p>update lambda image with correct architecture</p> </li> <li>or login to ec2 to update local image and restart brconnector container</li> </ul>"},{"location":"deploy/#migrating-to-new-rds-postgresql-database","title":"Migrating to new RDS PostgreSQL database","text":"<p>working \u2026</p>"},{"location":"guide/quick-start/","title":"Quick start","text":""},{"location":"guide/clients/introduce/","title":"Configuration for most clients","text":""},{"location":"guide/clients/sample-client-for-bedrock/","title":"Sample client for Bedrock","text":""},{"location":"guide/providers/aws-executor/","title":"aws-executor: AWS command executor","text":"<p>With this Provider, you can execute AWS command using natural language and get the execution results.</p> <p>The role for executing AWS commands and the role for running BRConnector are currently the same, so you need to grant the appropriate permissions to the current role.</p> <p>[!IMPORTANT] Do not grant write permissions to critical resources, as the command lines parsed by the current AI are not stable. However, you can still refer to the command lines suggested by the AI.</p>"},{"location":"guide/providers/aws-executor/#model-configuration","title":"Model configuration","text":"<p>The parameter configuration is as follows:</p> <p>Name: some-model</p> <p>Provider: aws-executor</p> <p>Configuration:</p> <pre><code>{\n  \"localLlmModel\": \"claude-3-sonnet\"\n}\n</code></pre> <p>localLlmModel must be configured as a model that supports function calling and already exists in BRConnector.</p> <p>[!Note] You need to configure a claude3+ model provided by the bedrock-converse provider, as other models do not yet have the capability for function calling. The default claude3 model in the system is not driven by converse. If you use these models, you need to update the original configuration to the bedrock-converse provider. Please note to modify the key \u2018model_id\u2019 to \u2018modelId\u2019.</p> <p>And You must install aws cli v2 in the BRConnector host.</p>"},{"location":"guide/providers/aws-executor/#install-aws-cli-in-docker-image","title":"Install AWS CLI  in Docker image","text":"<p>In this demo, the AWS CLI is not included in the Docker image, and you can install it yourself with the following command.</p> <pre><code>docker exec -it &lt;your-docker-instance&gt;  sh\n</code></pre> <pre><code>apt update &amp;&amp; apt install -y awscli\n</code></pre>"},{"location":"guide/providers/aws-executor/#screenshots-in-brclient","title":"Screenshots in BRClient","text":""},{"location":"guide/providers/bedrock-converse/","title":"Bedrock LLM invocker","text":""},{"location":"guide/providers/bedrock-knowledge-base/","title":"Bedrock Knowledge Bases","text":""},{"location":"guide/providers/bedrock-knowledge-base/#create-a-knowledge-base-instance","title":"Create a knowledge base instance","text":"<p>Refer to this document: Create a knowledge base</p>"},{"location":"guide/providers/bedrock-knowledge-base/#create-a-custom-model","title":"Create a custom model","text":"<p>Moel Configuration:</p> <pre><code>{\n  \"region\": \"&lt;your-region&gt;\",\n  \"summaryModel\": \"claude-3-sonnet\",\n  \"knowledgeBaseId\": \"&lt;your-kb-id&gt;\"\n}\n</code></pre> <ul> <li>knowledgeBaseId: the knowledge base id.</li> <li>summaryModel: support claude-3-sonnet, claude-3-haiku or claude-3-opus</li> </ul>"},{"location":"guide/providers/bedrock-knowledge-base/#api-calls","title":"API Calls","text":"<p>You can use normal api invoke, the Bedrock connector will pop last message to chat with the knowledge base.</p> <pre><code>POST /v1/chat/completions\nContent-Type: application/json\nAuthorization: Bearer br_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\n{\n  \"model\": \"your-custom-model-name\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"how to protect s3 data?\"\n    }\n  ]\n}\n</code></pre>"},{"location":"guide/providers/bedrock-knowledge-base/#use-brclient","title":"Use BRClient","text":""},{"location":"guide/providers/ollama/","title":"Ollama","text":""},{"location":"guide/providers/painter/","title":"Paint with SDXL","text":""},{"location":"guide/providers/painter/#configuration","title":"Configuration","text":"<p>Add a model in the /manager UI.</p> <p></p> <ul> <li>Name: Any words</li> <li>Provider: painter</li> <li>Multiple: disable</li> <li>Price-in: any number</li> <li>Price-out: any number</li> <li>Config: Please see the sample below.</li> </ul> <pre><code>{\n  \"regions\": [\n    \"us-east-1\", \"us-west-2\"\n  ],\n  \"s3Bucket\": \"&lt;your-bucket&gt;\",\n  \"s3Prefix\": \"&lt;your-prefix&gt;\",\n  \"s3Region\": \"us-east-1\",\n  \"sdModelId\": \"stability.stable-diffusion-xl-v1\",\n  \"llmModelId\": \"anthropic.claude-3-sonnet-20240229-v1:0\"\n}\n</code></pre> <p>Then grant this model to  group or apikey.</p>"},{"location":"guide/providers/painter/#features-and-screenshots-in-brclient","title":"Features and Screenshots in BRClient","text":"<p>Features:</p> <ul> <li>Supports natural language conversation</li> <li>Supports multi-turn conversation to refine prompts</li> <li>Supports multiple languages</li> <li>Supports image size and aspect ratio ratio</li> </ul> <p>Screenshots in BRClient:</p> <p>BRClient has been built into the Docker image (since version 0.0.8). Access address: your-host:8866/brclient/</p> <p></p> <p></p>"},{"location":"guide/providers/sagemaker-lmi/","title":"Connect to Sagemaker LLM modes","text":""},{"location":"guide/providers/sagemaker-openai/","title":"How to properly deploy a Sagemaker model","text":""},{"location":"guide/providers/sagemaker-openai/#input","title":"Input","text":"<p>To make the Sagemaker-deployed model compatible with the provider of sagemaker-openai, you need to ensure your model accepts input in the OpenAI API format, which is as follows:</p> <pre><code>{\n  \"model\": \"YourDefinedModel\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"hello\"\n    }\n  ],\n  \"stream\": true,\n  \"temperature\": 0.5,\n  \"presence_penalty\": 0,\n  \"frequency_penalty\": 0,\n  \"top_p\": 1,\n  \"max_tokens\": 4000\n}\n</code></pre>"},{"location":"guide/providers/sagemaker-openai/#output","title":"Output","text":"<p>At the same time, you need to ensure your model\u2019s output also conforms to the OpenAI format. There are two output formats: streaming and non-streaming.</p>"},{"location":"guide/providers/sagemaker-openai/#non-streaming","title":"Non-streaming","text":"<p>The non-streaming output format is as follows:</p> <pre><code>{\n  \"id\": \"chatcmpl-123\",\n  \"object\": \"chat.completion\",\n  \"created\": 1677652288,\n  \"model\": \"gpt-3.5-turbo-0125\",\n  \"system_fingerprint\": \"fp_44709d6fcb\",\n  \"choices\": [{\n    \"index\": 0,\n    \"message\": {\n      \"role\": \"assistant\",\n      \"content\": \"\\n\\nHello there, how may I assist you today?\",\n    },\n    \"logprobs\": null,\n    \"finish_reason\": \"stop\"\n  }],\n  \"usage\": {\n    \"prompt_tokens\": 9,\n    \"completion_tokens\": 12,\n    \"total_tokens\": 21\n  }\n}\n</code></pre> <p>choices[0].message.content is required.</p>"},{"location":"guide/providers/sagemaker-openai/#streaming","title":"Streaming","text":"<p>This is an example of streaming output, where each line represents a complete segment. Please do not truncate it. You must response this in your sagemaker custom inference function.</p> <pre><code>{\"id\":\"chatcmpl-123\",\"object\":\"chat.completion.chunk\",\"created\":1694268190,\"model\":\"gpt-3.5-turbo-0125\", \"system_fingerprint\": \"fp_44709d6fcb\", \"choices\":[{\"index\":0,\"delta\":{\"role\":\"assistant\",\"content\":\"\"},\"logprobs\":null,\"finish_reason\":null}]}\n\n{\"id\":\"chatcmpl-123\",\"object\":\"chat.completion.chunk\",\"created\":1694268190,\"model\":\"gpt-3.5-turbo-0125\", \"system_fingerprint\": \"fp_44709d6fcb\", \"choices\":[{\"index\":0,\"delta\":{\"content\":\"Hello\"},\"logprobs\":null,\"finish_reason\":null}]}\n\n....\n\n{\"id\":\"chatcmpl-123\",\"object\":\"chat.completion.chunk\",\"created\":1694268190,\"model\":\"gpt-3.5-turbo-0125\", \"system_fingerprint\": \"fp_44709d6fcb\", \"choices\":[{\"index\":0,\"delta\":{},\"logprobs\":null,\"finish_reason\":\"stop\"}]}        \n</code></pre>"},{"location":"guide/providers/sagemaker-openai/#sagemaker-custom-inference-deployment-resources","title":"Sagemaker Custom Inference Deployment Resources","text":"<p>You can use Sagemaker\u2019s custom inference code to perform format conversion. You can refer to these examples:</p> <p>https://github.com/huggingface/notebooks/blob/main/sagemaker/17_custom_inference_script/sagemaker-notebook.ipynb</p> <p>https://github.com/aws/amazon-sagemaker-examples/blob/main/inference/generativeai/llm-workshop/lab3-optimize-llm/djl_accelerate_deploy_g5_12x_GPT_NeoX.ipynb</p> <p>https://docs.djl.ai/docs/serving/serving/docs/lmi/deployment_guide/testing-custom-script.html</p>"},{"location":"guide/providers/web-miner/","title":"web-miner\uff1aSeach the internet","text":"<p>This Provider can turn your question into search keywords, obtain results through search engines, and then summarize them into corresponding answers.</p> <p>Tip</p> <p>Do not ask too many rounds of questions, because this Provider will summarize your previous prompts to keywords for searching.</p> <p>And since the results of the questions are too many, the BRClient will summarize the history, thereby losing the earliest user input.</p>"},{"location":"guide/providers/web-miner/#model-configuration","title":"Model configuration","text":"<p>The parameter configuration is as follows:</p> <p>Name: some-model</p> <p>Provider: web-miner</p> <p>Configuration:</p> <pre><code>{\n  \"sites\": [\n    \"aws.amazon.com\",\n    \"www.amazonaws.cn\",\n    \"repost.aws\",\n    \"stackoverflow.com\"\n  ],\n  \"localLlmModel\": \"claude-3-sonnet\",\n  \"searxng\": {\n    \"host\": \"http://localhost:8081\"\n  },\n  \"google\": {\n    \"googleCSECX\": \"00xxxc000a2xxxxx\",\n    \"googleAPIKey\": \"AIxxxxxx_xxxxxxxx\"\n  },\n  \"serpapi\": {\n\n  },\n  \"duckduckgo\": {\n\n  }\n}\n</code></pre> <ul> <li>sites: Limit the search to these websites.</li> <li>search engine, choose one of the following:</li> <li>searxng</li> <li>google</li> <li>DuckDuckGo</li> <li>SerpAPI</li> <li>localLlmModel: must be configured as a model that supports function calling and already exists in BRConnector.</li> </ul>"},{"location":"guide/providers/web-miner/#search-engines","title":"Search engines","text":""},{"location":"guide/providers/web-miner/#searxng","title":"searxng","text":"<p>Visit https://docs.searxng.org/ for more information.</p> <p>\u521b\u5efa\u4e00\u4e2a settings.yml \u6587\u4ef6\uff0c\u589e\u52a0\u8f93\u51fa\u683c\u5f0f json\u3002</p> <pre><code>use_default_settings: true\nserver:\n    secret_key: \"some-Other-PWD\"   # change this!\n    bind_address: \"0.0.0.0\"\nsearch:\n  formats:\n\n    - html\n    - json\n</code></pre> <p>Start searxng:</p> <pre><code>docker run --rm -d -p 8081:8080 \\\n -e \"BASE_URL=http://localhost:8081/\" \\\n -e \"INSTANCE_NAME=searxng\" searxng/searxng\n</code></pre> <p>Then you will get the searxng endpoint: http://localhost:8081/.</p>"},{"location":"guide/providers/web-miner/#duckduckgo","title":"DuckDuckGo","text":""},{"location":"guide/providers/web-miner/#serpapi","title":"SerpAPI","text":"<p>Not free</p> <p>Exceeding the daily free limit will be charged.</p>"},{"location":"guide/providers/web-miner/#google","title":"Google","text":"<p>Not free</p> <p>Exceeding the daily free limit will be charged.</p> <p>Google CSE key apply</p>"},{"location":"guide/providers/web-miner/#screenshots-in-brclient","title":"Screenshots in BRClient","text":""},{"location":"zh/","title":"\u6b22\u8fce\u8bbf\u95ee Bedrock Connector \u6587\u6863","text":""},{"location":"zh/deploy/","title":"\u4f7f\u7528 Cloudformation \u5feb\u901f\u90e8\u7f72","text":""},{"location":"zh/deploy/#_1","title":"\u652f\u6301\u7684\u533a\u57df","text":"<p>Cloudformation \u6a21\u677f\u5df2\u5728\u4ee5\u4e0b\u533a\u57df\u9a8c\u8bc1\uff1a</p> <ul> <li>us-east-1</li> <li>us-west-2</li> </ul>"},{"location":"zh/deploy/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<p>\u5728\u60a8\u7684\u533a\u57df\u542f\u7528 Claude 3 Sonnet \u6216 Haiku - \u5982\u679c\u60a8\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528 Anthropic \u6a21\u578b\uff0c\u8bf7\u8f6c\u5230\u00a0Amazon Bedrock \u63a7\u5236\u53f0\u00a0\u5e76\u5728\u5de6\u4e0b\u89d2\u7a97\u683c\u4e2d\u9009\u62e9\u00a0\u6a21\u578b\u8bbf\u95ee\u3002\u5355\u72ec\u8bf7\u6c42 Claude 3 Sonnet \u6216 Haiku \u7684\u8bbf\u95ee\u6743\u9650\u3002</p>"},{"location":"zh/deploy/#_3","title":"\u7ec4\u4ef6","text":"<p>\u6b64 Cloudformation \u6a21\u677f\u5c06\u5305\u542b\u4ee5\u4e0b\u5173\u952e\u7ec4\u4ef6\uff1a</p> <ul> <li>Cloudfront</li> <li>Lambda \u6216 EC2 \u4e0a\u7684 BRConnector</li> <li>EC2 \u4e0a\u7684 RDS PostgreSQL \u6216 PostgreSQL \u5bb9\u5668</li> <li>\u542f\u7528\u4e86\u62c9\u53d6\u7f13\u5b58\u7684 ECR</li> </ul>"},{"location":"zh/deploy/#_4","title":"\u90e8\u7f72\u6307\u5357","text":"<ul> <li>\u4e0b\u8f7d quick-build-brconnector.yaml \u5e76\u4e0a\u4f20\u5230 Cloudformation \u63a7\u5236\u53f0\u6216\u5355\u51fb\u6b64\u6309\u94ae\u76f4\u63a5\u542f\u52a8\u3002</li> </ul> <ul> <li>VPC \u53c2\u6570<ul> <li>\u9009\u62e9\u521b\u5efa\u65b0 VPC \u6216\u73b0\u6709 VPC</li> <li>\u4e3a EC2 \u9009\u62e9\u4e00\u4e2a\u516c\u5171\u5b50\u7f51\uff0c\u4e3a Lambda \u548c RDS \u9009\u62e9\u4e00\u4e2a\u79c1\u6709\u5b50\u7f51\uff08 RDS \u5b50\u7f51\u7ec4\u81f3\u5c11\u9700\u8981 2 \u4e2a\u53ef\u7528\u533a\uff09</li> </ul> </li> </ul> <ul> <li>\u8ba1\u7b97\u53c2\u6570<ul> <li>\u9009\u62e9 BRConnector\u3001Lambda \u6216 EC2 \u7684\u8ba1\u7b97\u7c7b\u578b</li> <li>\u5bf9\u4e8eEC2 \u8bbe\u7f6e<ul> <li>\u73b0\u5728\u4ec5\u652f\u6301 Amazon Linux 2023</li> <li>\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u540c\u4e00 EC2 \u4e2d\u521b\u5efa PostgreSQL \u4f5c\u4e3a\u5bb9\u5668\uff08<code>StandaloneDB</code> \u4e3a false\uff09\uff0c\u6216\u521b\u5efa\u72ec\u7acb\u7684 RDS PostgreSQL \u4f5c\u4e3a\u540e\u7aef\uff08<code>StandaloneDB</code> \u4e3a true\uff09</li> </ul> </li> <li>\u5bf9\u4e8e Lambda \u8bbe\u7f6e<ul> <li>\u5c06\u4f7f\u7528 PUBLIC \u51fd\u6570 URL\u3002\u8bf7\u786e\u4fdd\u6b64\u5b89\u5168\u8bbe\u7f6e\u662f\u53ef\u63a5\u53d7\u7684</li> <li>\u5b9a\u4e49\u60a8\u7684\u79c1\u6709\u5b58\u50a8\u5e93\u540d\u79f0\u524d\u7f00\u5b57\u7b26\u4e32</li> <li>\u59cb\u7ec8\u521b\u5efa RDS PostgreSQL\uff08<code>StandaloneDB</code> \u4e3a true\uff09</li> </ul> </li> </ul> </li> </ul> <ul> <li>PostgreSQL \u53c2\u6570<ul> <li>\u9ed8\u8ba4 PostgreSQL \u5bc6\u7801\u4e3a <code>mysecretpassword</code></li> <li>\u5982\u679c\u60a8\u9009\u62e9 <code>StandaloneDB</code> \u4e3a false\uff0cPostgreSQL \u5c06\u4f5c\u4e3a\u5bb9\u5668\u5728 EC2 \u4e0a\u8fd0\u884c\u3002\u5982\u679c\u6b64\u9009\u9879\u4e3a true\uff0c\u5c06\u521b\u5efa RDS PostgreSQL\u3002</li> <li>\u5176\u4ed6\u4fdd\u6301\u9ed8\u8ba4</li> </ul> </li> </ul> <ul> <li>\u8c03\u8bd5\u53c2\u6570<ul> <li>\u5982\u679c\u9009\u62e9 Lambda \u4f5c\u4e3a ComputeType\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u5728\u6240\u6709\u8d44\u6e90\u90e8\u7f72\u6210\u529f\u540e\u5220\u9664 EC2\u3002\u6b64 EC2 \u6682\u65f6\u7528\u4e8e\u7f16\u8bd1\u548c\u6784\u5efa BRConnector \u5bb9\u5668\u3002</li> <li>\u5982\u679c\u9009\u62e9 EC2 \u4f5c\u4e3a ComputeType\uff0c\u8bf7\u4e0d\u8981\u5220\u9664 EC2</li> <li>\u5982\u679c\u5c06 AutoUpdateBRConnector \u8bbe\u7f6e\u4e3a <code>true</code>\uff0c\u5219\u4f1a\u5c06\u4e00\u4e2a\u811a\u672c\u6dfb\u52a0\u5230 codebuild \u4e2d</li> </ul> </li> </ul> <ul> <li>\u76f4\u5230\u90e8\u7f72\u6210\u529f\uff0c\u8f6c\u5230\u8f93\u51fa\u9875\u9762\u5e76\u5c06 Cloudfront URL \u548c First User Key \u590d\u5236\u5230\u60a8\u7684 Bedrock \u5ba2\u6237\u7aef\u8bbe\u7f6e\u9875\u9762\u3002</li> </ul> <ul> <li>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528 SSM \u4f1a\u8bdd\u7ba1\u7406\u5668\u8fde\u63a5\u5230 <code>BRConnector</code> EC2 \u5b9e\u4f8b (docs)</li> </ul>"},{"location":"zh/deploy/#brconnector","title":"\u66f4\u65b0 BRConnector","text":""},{"location":"zh/deploy/#autoupdate-true","title":"AutoUpdate \u4e3a true","text":"<ul> <li>\u68c0\u67e5\u60a8\u7684 ECR \u8bbe\u7f6e\uff0c\u5982\u679c\u5728\u62c9\u53d6\u7f13\u5b58\u9875\u9762\u4e2d\u6709\u89c4\u5219\uff0c\u5219\u60a8\u5df2\u542f\u7528\u6b64\u529f\u80fd\u4ee5\u4f7f\u7528\u4e0a\u6e38\u5b58\u50a8\u5e93\u81ea\u52a8\u66f4\u65b0 ECR \u6620\u50cf\u3002</li> <li>\u8f6c\u5230 codebuild \u9875\u9762\uff0c\u5c06\u89e6\u53d1\u4e00\u4e2a\u9879\u76ee\u5b9a\u671f\u6784\u5efa\u4ee5\u81ea\u52a8\u66f4\u65b0\u60a8\u7684 lambda \u6620\u50cf</li> <li>EC2 \u4e2d\u7684\u6620\u50cf\u5c06\u4f7f\u7528 SSM \u4e2d\u7684\u72b6\u6001\u7ba1\u7406\u5668\u81ea\u52a8\u66f4\u65b0\u3002</li> </ul>"},{"location":"zh/deploy/#autoupdate-false","title":"AutoUpdate \u4e3a false","text":"<ul> <li>\u68c0\u67e5\u60a8\u7684 ECR \u8bbe\u7f6e\uff0c\u5982\u679c\u5728\u62c9\u53d6\u7f13\u5b58\u9875\u9762\u4e2d\u6709\u89c4\u5219\uff0c\u5219\u60a8\u5df2\u542f\u7528\u6b64\u529f\u80fd\u4ee5\u4f7f\u7528\u4e0a\u6e38\u5b58\u50a8\u5e93\u81ea\u52a8\u66f4\u65b0 ECR \u6620\u50cf\u3002</li> <li>\u8f6c\u5230 codebuild \u9875\u9762\uff0c\u53ef\u4ee5\u89e6\u53d1\u4e00\u4e2a\u9879\u76ee\u6765\u624b\u52a8\u66f4\u65b0\u60a8\u7684 lambda \u6620\u50cf\u3002\u5355\u51fb\u201c\u5f00\u59cb\u6784\u5efa\u201d\u4ee5\u66f4\u65b0 lambda \u6620\u50cf\u3002</li> <li>\u7531\u4e8e\u672a\u521b\u5efa\u5173\u8054\uff0cEC2 \u4e2d\u7684\u6620\u50cf\u5c06\u4e0d\u4f1a\u4f7f\u7528 SSM \u4e2d\u7684\u72b6\u6001\u7ba1\u7406\u5668\u81ea\u52a8\u66f4\u65b0\u3002\u53c2\u8003 SSM \u4e2d\u7684\u6587\u6863\u4ee5\u624b\u52a8\u5728 EC2 \u4e2d\u6267\u884c\u547d\u4ee4\u3002</li> </ul>"},{"location":"zh/deploy/#ecr-cfn","title":"\u672a\u542f\u7528\u62c9\u53d6\u7f13\u5b58\u7684 ECR\uff08\u4ec5\u9002\u7528\u4e8e\u4ee5\u524d\u7684 cfn \u7248\u672c\uff09","text":"<ul> <li> <p>\u5982\u679c\u60a8\u672a\u542f\u7528 ECR \u62c9\u53d6\u7f13\u5b58\uff0c\u8bf7\u6309\u7167\u6b64\u811a\u672c\u624b\u52a8\u66f4\u65b0\u6620\u50cf <pre><code>export AWS_DEFAULT_REGION=us-west-2\nexport ACCOUNT_ID=123456789012\nexport PrivateECRRepository=your_private_repo_name\n\naws ecr get-login-password --region ${AWS_DEFAULT_REGION} | docker login --username AWS --password-stdin ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com\n\n# pull/tag/push arm64 image for lambda\ndocker pull --platform=linux/arm64 public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda\ndocker tag public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64\ndocker push ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64\n\n# pull/tag/push amd64 image for lambda\ndocker pull --platform=linux/amd64 public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda\ndocker tag public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock-lambda ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64\ndocker push ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64\n\n# create/push manifest file\ndocker manifest create ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest --amend ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64 --amend ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64\ndocker manifest annotate ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:arm64 --os linux --arch arm64\ndocker manifest annotate ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:amd64 --os linux --arch amd64\ndocker manifest push ${ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/${PrivateECRRepository}:latest\n</code></pre></p> </li> <li> <p>\u4f7f\u7528\u6b63\u786e\u7684\u67b6\u6784\u66f4\u65b0 lambda \u6620\u50cf</p> </li> </ul>"},{"location":"zh/deploy/#ec2-brconnector","title":"\u8fd0\u884c\u5728 EC2 \u4e0a\u7684 BRConnector","text":"<ul> <li>\u767b\u5f55\u5230 ec2 \u4ee5\u66f4\u65b0\u672c\u5730\u6620\u50cf\u5e76\u91cd\u65b0\u542f\u52a8 brconnector \u5bb9\u5668 <pre><code>aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws\ndocker pull public.ecr.aws/x6u9o2u4/sample-connector-for-bedrock\ndocker restart brconnector\n</code></pre></li> </ul>"},{"location":"zh/deploy/#rds-postgresql","title":"\u8fc1\u79fb\u5230\u65b0\u7684 RDS PostgreSQL \u6570\u636e\u5e93","text":"<p>working \u2026</p>"},{"location":"zh/guide/providers/aws-executor/","title":"AWS \u547d\u4ee4\u884c\u6267\u884c\u5668","text":"<p>With this Provider, you can execute AWS command using natural language and get the execution results.</p> <p>The role for executing AWS commands and the role for running BRConnector are currently the same, so you need to grant the appropriate permissions to the current role.</p> <p>Info</p> <p>Do not grant write permissions to critical resources, as the command lines parsed by the current AI are not stable. However, you can still refer to the command lines suggested by the AI.</p>"},{"location":"zh/guide/providers/web-miner/","title":"\u641c\u7d22\u4e92\u8054\u7f51","text":"<p>This Provider can turn your question into search keywords, obtain results through search engines, and then summarize them into corresponding answers.</p> <p>[!TIP] Please note, do not ask too many rounds of questions, because this Provider will summarize your previous prompts to keywords for searching.</p> <p>And since the results of the questions are too many, the BRClient will summarize the history, thereby losing the earliest user input.</p>"},{"location":"zh/guide/providers/web-miner/#model-configuration","title":"Model configuration","text":"<p>The parameter configuration is as follows:</p> <p>Name: some-model</p> <p>Provider: web-miner</p> <p>Configuration:</p> <pre><code>{\n  \"sites\": [\n    \"aws.amazon.com\",\n    \"www.amazonaws.cn\",\n    \"repost.aws\",\n    \"stackoverflow.com\"\n  ],\n  \"localLlmModel\": \"claude-3-sonnet\",\n  \"searxng\": {\n    \"host\": \"http://127.0.0.1:8081\"\n  },\n  \"google\": {\n    \"googleCSECX\": \"00xxxc000a2xxxxx\",\n    \"googleAPIKey\": \"AIxxxxxx_xxxxxxxx\"\n  },\n  \"serpapi\": {\n\n  },\n  \"duckduckgo\": {\n\n  }\n}\n</code></pre> <ul> <li>sites: Limit the search to these websites.</li> <li>search engine, choose one of the following:</li> <li>searxng</li> <li>google</li> <li>DuckDuckGo</li> <li>SerpAPI</li> <li>localLlmModel: must be configured as a model that supports function calling and already exists in BRConnector.</li> </ul>"},{"location":"zh/guide/providers/web-miner/#search-engine-configuration","title":"Search engine configuration","text":""},{"location":"zh/guide/providers/web-miner/#searxng","title":"searxng","text":"<p>\u8be6\u60c5\u8bf7\u8bbf\u95ee https://docs.searxng.org/\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a settings.yml \u6587\u4ef6\uff0c\u589e\u52a0\u8f93\u51fa\u683c\u5f0f json\u3002</p> <pre><code>use_default_settings: true\nserver:\n    secret_key: \"some-Other-PWD\"   # change this!\n    bind_address: \"0.0.0.0\"\nsearch:\n  formats:\n\n    - html\n    - json\n</code></pre> <p>\u542f\u52a8 searxng:</p> <pre><code>docker run --rm -d -p 8081:8080 \\\n  -v ./settings.yml:/etc/searxng/settings.yml \\\n  -e \"INSTANCE_NAME=searxng\" searxng/searxng\n</code></pre> <p>\u8fd9\u6837\u90e8\u7f72\u51fa\u6765\u7684 searxng \u4e3b\u673a\u5730\u5740\u662f: http://127.0.0.1:8081/.</p>"},{"location":"zh/guide/providers/web-miner/#serpapi","title":"SerpAPI","text":"<p>SerpAPI \u4e0d\u514d\u8d39</p> <p>Exceeding the daily free limit will be charged.</p>"},{"location":"zh/guide/providers/web-miner/#google","title":"Google","text":"<p>Warning</p> <p>Exceeding the daily free limit will be charged.</p> <p>Google CSE key apply</p>"}]}